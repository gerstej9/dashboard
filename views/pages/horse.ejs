<!DOCTYPE html>
<html>
  <head>
    <title>Numerai Dashboard</title>
    <link href= "../style/reset.css" rel= "stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link href= "../style/base.css" rel= "stylesheet">
    <link id = "theme"  href= "../style/lightlayout.css" rel= "stylesheet">
    <link href= "../style/modules.css" rel= "stylesheet">
  </head>
  <body>
    <header>
      <h1>Daily Horse</h1>
      <h2>Date: <%=date%></h2>
      <h2>Live Rounds: <%=userData[0].activeRounds[0].roundNumber%> to <%=userData[0].activeRounds[3].roundNumber%></h2>
      <h2>NMR Price: <%=nmrPrice%></h2>
      <nav>
        <button class = "toggle">Dark Mode</button>
      </nav>
    </header>
    <main>
      <h2 class ="user">User: Monkey</h2>
      <div class = "titleRow monkey">
        <p>Model</p>
        <p>Staked</p>
        <p>Payout</p>
        <p>Daily Change</p>
        <p>Prev Corr Rank</p>
        <p>Rank</p>
        <p>MMC Rank</p>
      </div>
      <% let userTotalStake = 0%>
      <%let activeTotalAllModels = 0%>
      <%let dailyChangeAllModels = 0%>
      <%for(let i = 0; i< 8; i++){%>
      <div class = "modelRow monkey">
        <p><%=userData[i].modelName%></p>
        <p><%=userData[i].totalStake%> NMR</p>
        <% userTotalStake+=Number(userData[i].totalStake)%>
        <% let activeTotal = 0%>
        <%for(let j =0; j< userData[i].activeRounds.length; j++){activeTotal+= Number(userData[i].activeRounds[j].payoutPending)}%>
        <p><%=activeTotal.toFixed(2)%> NMR </p>
        <p><%=userData[i].dailyChange%> NMR </p>
        <%dailyChangeAllModels += Number(userData[i].dailyChange)%>
        <p><%=userData[i].corrPrev%></p>
        <p><%=userData[i].corrCurrent%></p>
        <p><%=userData[i].mmcCurrent%></p>
      </div>
      <%activeTotalAllModels+= Number(activeTotal)}%>
      <div class = "totalRow monkey">
        <p>Daily Change NMR: <%=dailyChangeAllModels.toFixed(2)%> NMR</p>
        <% let dailyChangeAllModelsUsd = (dailyChangeAllModels *nmrPrice)%>
        <p>Daily Change USD: $<%=dailyChangeAllModelsUsd.toFixed(2)%></p>
        <p>Total Pending Payout: <%=activeTotalAllModels.toFixed(2)%> NMR </p>
        <%let currPayoutUsd = (activeTotalAllModels*nmrPrice).toFixed(2)%>
        <p>Total Pending USD: $<%=currPayoutUsd%></p>
        <p>Total NMR Staked: <%= userTotalStake.toFixed(2)%> NMR</p>
        <%let stakedPayoutUsd = (userTotalStake*nmrPrice).toFixed(2)%>
        <p>Total USD Staked: $<%=stakedPayoutUsd%></p>
        <% let userLiveTotal = (userTotalStake + activeTotalAllModels).toFixed(2)%>
        <p>Live Total NMR: <%=userLiveTotal%> NMR</p>
        <% let userLiveTotalUsd = (userLiveTotal*nmrPrice).toFixed(2)%>
        <p> Live Total USD: $<%=Number(userLiveTotalUsd).toFixed(2)%></p>
      </div>

      <h2 class ="user">User: Fox</h2>
      <div class = "titleRow fox">
        <p>Model</p>
        <p>Staked</p>
        <p>Payout</p>
        <p>Daily Change</p>
        <p>Prev Corr Rank</p>
        <p>Rank</p>
        <p>MMC Rank</p>
      </div>
      <%dailyChangeAllModels = 0%>
      <% userTotalStake = 0%>
      <%activeTotalAllModels = 0%>
      <%for(let i = 8; i< 18; i++){%>
      <div class = "modelRow fox">
        <p><%=userData[i].modelName%></p>
        <p><%=userData[i].totalStake%> NMR</p>
        <% userTotalStake+=Number(userData[i].totalStake)%>
        <% let activeTotal = 0%>
        <%for(let j =0; j< userData[i].activeRounds.length; j++){activeTotal+= Number(userData[i].activeRounds[j].payoutPending)}%>
        <p><%=activeTotal.toFixed(2)%> NMR </p>
        <p><%=userData[i].dailyChange%> NMR </p>
        <%dailyChangeAllModels += Number(userData[i].dailyChange)%>
        <p><%=userData[i].corrPrev%></p>
        <p><%=userData[i].corrCurrent%></p>
        <p><%=userData[i].mmcCurrent%></p>
      </div>
      <%activeTotalAllModels+= Number(activeTotal)}%>
      <div class = "totalRow fox">
        <p>Daily Change NMR: <%= dailyChangeAllModels.toFixed(2)%> NMR</p>
        <% dailyChangeAllModelsUsd = (dailyChangeAllModels *nmrPrice)%>
        <p>Daily Change USD: $<%=dailyChangeAllModelsUsd.toFixed(2)%></p>
        <p>Total Pending Payout: <%=activeTotalAllModels.toFixed(2)%> NMR </p>
        <%currPayoutUsd = (activeTotalAllModels*nmrPrice).toFixed(2)%>
        <p>Total Pending USD: $<%=currPayoutUsd%></p>
        <p>Total NMR Staked: <%= userTotalStake.toFixed(2)%> NMR</p>
        <%stakedPayoutUsd = (userTotalStake*nmrPrice).toFixed(2)%>
        <p>Total USD Staked: $<%=stakedPayoutUsd%></p>
        <% userLiveTotal = (userTotalStake + activeTotalAllModels).toFixed(2)%>
        <p>Live Total NMR: <%=userLiveTotal%> NMR</p>
        <% userLiveTotalUsd = (userLiveTotal*nmrPrice)%>
        <p> Live Total USD: $<%=Number(userLiveTotalUsd).toFixed(2)%></p>
      </div>

      <h2 class ="user">User: Cat</h2>
        <div class = "titleRow cat">
          <p>Model</p>
          <p>Staked</p>
          <p>Payout</p>
          <p>Daily Change</p>
          <p>Prev Corr Rank</p>
          <p>Rank</p>
          <p>MMC Rank</p>
        </div>
        <%dailyChangeAllModels = 0%>
        <% userTotalStake = 0%>
        <%activeTotalAllModels = 0%>
        <%for(let i = 18; i< 33; i++){%>
        <div class = "modelRow cat">
          <p><%=userData[i].modelName%></p>
          <p><%=userData[i].totalStake%> NMR</p>
          <% userTotalStake+=Number(userData[i].totalStake)%>
          <% let activeTotal = 0%>
          <%for(let j =0; j< userData[i].activeRounds.length; j++){activeTotal+= Number(userData[i].activeRounds[j].payoutPending)}%>
          <p><%=activeTotal.toFixed(2)%> NMR </p>
          <p><%=userData[i].dailyChange%> NMR </p>
          <%dailyChangeAllModels += Number(userData[i].dailyChange)%>
          <p><%=userData[i].corrPrev%></p>
          <p><%=userData[i].corrCurrent%></p>
          <p><%=userData[i].mmcCurrent%></p>
        </div>
      <%activeTotalAllModels+= Number(activeTotal)}%>
      <div class = "totalRow cat">
        <p>Daily Change NMR: <%= dailyChangeAllModels.toFixed(2)%> NMR</p>
        <% dailyChangeAllModelsUsd = (dailyChangeAllModels *nmrPrice)%>
        <p>Daily Change USD: $<%=dailyChangeAllModelsUsd.toFixed(2)%></p>
        <p>Total Pending Payout: <%=activeTotalAllModels.toFixed(2)%> NMR </p>
        <%currPayoutUsd = (activeTotalAllModels*nmrPrice).toFixed(2)%>
        <p>Total Pending USD: $<%=currPayoutUsd%></p>
        <p>Total NMR Staked: <%= userTotalStake.toFixed(2)%> NMR</p>
        <%stakedPayoutUsd = (userTotalStake*nmrPrice).toFixed(2)%>
        <p>Total USD Staked: $<%=stakedPayoutUsd%></p>
        <% userLiveTotal = (userTotalStake + activeTotalAllModels).toFixed(2)%>
        <p>Live Total NMR: <%=userLiveTotal%> NMR</p>
        <% userLiveTotalUsd = (userLiveTotal*nmrPrice)%>
        <p> Live Total USD: $<%=Number(userLiveTotalUsd).toFixed(2)%></p>
      </div>

    </main>
    <footer>

    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src= '/js/darkmode.js'></script>
  </body>
</html>